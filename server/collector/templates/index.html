<!DOCTYPE html>

<head>

<!-- <script type="text/javascript">
  	function isMobile(){
		  var check = false;
		  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01||nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
		  return check;
	}

	if(isMobile()){mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g
		window.location.href = '/error';
	}
</script> -->

{% load staticfiles %}

<link rel="stylesheet" href="{% static "material_custom.css" %}" type="text/css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script type="text/javascript">

	var predefinedFreqs = ["4000", "8000", "16000", "32000", "64000", "128000"];
	var initCheck = true;
	var commandOperating = false;
	var stateChangeCheck = false;
	var interval;

	function validatePattern(item){
		var pattern = item.attr('pattern');
        var value = item.val();

        return (!(pattern&&(value.length>0)&&!value.match( new RegExp('^'+pattern+'$') ))) && (value.length != 0);
	}

	// ----- checkbox 1~8 체크여부 확인
	function validateChannels(){
		var result = false;

        // Checking channel
        for(var i=1; i<=8; i++){
        	var checkId = "#selectChannel" + (i);

        	if($(checkId).is(':checked')){
        		result = true;
        	}
        }
        return result;
	}


	function showValidationErrorDialog(){
		var errorDialog = document.querySelector('#dialog_validation_error');
		if (!errorDialog.showModal) {
			dialogPolyfill.registerDialog(errorDialog);
	    }

	    errorDialog.querySelector('button:not([disabled])')
	    .addEventListener('click', function() {
	      	errorDialog.close();
	    });

	    errorDialog.showModal();
	}

	function showChannelErrorDialog(){
		var errorDialog = document.querySelector('#dialog_channel_error');
		if (!errorDialog.showModal) {
			dialogPolyfill.registerDialog(errorDialog);
	    }

	    errorDialog.querySelector('button:not([disabled])')
	    .addEventListener('click', function() {
	      	errorDialog.close();
	    });

	    errorDialog.showModal();
	}

	// chipInfo를 받아서 채널 체크박스 활성화 / 비활성화
	function setCheckBoxState(chipInfo){
		var jsonData = $.parseJSON(chipInfo);
		var valid = jsonData.valid;
		var Rc = jsonData.Rc;
		var Cc = jsonData.Cc;

		for(var i=0; i<Rc.length; i++){
			var rId = "#R" + (i+1);
			var cId = "#C" + (i+1);
			var validId = "#valid" + (i+1) + "_icon";
			var selectId = "#selectChannel" + (i+1);
			var selectCheckerId = "#selectChannel" + (i+1) + "_checker";

			$(rId).text(Rc[i]);
			$(cId).text(Cc[i]);
			$(selectId).prop("checked", false);

			if(valid[i]){
				$(validId).text("check");
				$(validId).attr("class", "material-icons  mdl-list__item-icon blueled");
				$(selectId).prop("disabled", false);
				$(selectCheckerId).attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded");
			}
			else{
				$(validId).text("close");
				$(validId).attr("class", "material-icons  mdl-list__item-icon redled");
				$(selectId).prop("disabled", true);
			}
		}
	}

	// 테이블 초기화
	function clearTable(){
		for(var i=0; i<8; i++){
			var rId = "#R" + (i+1);
			var cId = "#C" + (i+1);
			var validId = "#valid" + (i+1) + "_icon";
			var selectId = "#selectChannel" + (i+1);
			var selectCheckerId = "#selectChannel" + (i+1) + "_checker";

			$(rId).text("");
			$(cId).text("");
			$(selectId).prop("checked", false);
			$(selectId).prop("disabled", true);
			$(validId).text("remove");
			$(validId).attr("class", "material-icons  mdl-list__item-icon");
			$(selectCheckerId).attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded");
		}
	}

	// 시작시간을 받아서 시 : 분 : 초 로 표시
	function setElapsedTime(startTime){
		var startTimeValue = new Date(startTime);
		var endTimeValue = new Date();
		var elapsedTimeSec = Math.floor((endTimeValue-startTimeValue)/1000.0);

		if(elapsedTimeSec > 0){
			var second = elapsedTimeSec % 60;
			var minute = Math.floor(elapsedTimeSec / 60.0);
			var hour = Math.floor(minute / 60.0);
			minute = minute - hour * 60;
			var elapsedTime = hour + ":" + minute + ":" + second;
			$('#elapsed_time').text(elapsedTime);
		}
	}

	function checkState(){
		var request = $.ajax({
			url: "/command/",
			type: "POST",
			data: "{\"command\":\"CheckState\"}",
			dataType: "json",

			beforeSend: function(){
			},
			success: function(result){
      			var jsonData = result;

      			if(jsonData["result"]){
      				var state = jsonData.state;
      				var startTime = jsonData.startTime;

      				// setting the state data
      				$('#state').text(state);

      				// Getting another information once
      				if(state != "initializing"){
	      				if(initCheck){
	      					initCheck = false;

	      					if(state == "ready"){
	      						$('#checkChip').prop("disabled", false);
	      						$('#setup').prop("disabled", true);
	      						for(var i=1; i<=6; i++){
			          				$('#selectFreq' + i).prop("disabled", true);
			          				$('#selectFreq' + i).prop("checked", false);
			          				$('#selectFreq' + i + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded");
			          			}
	      						$('#period').prop("disabled", true);
	      						$('#period').val("");
	      						$('#deadline').prop("disabled", true);
	      						$('#deadline').val("");
	      						$('#recording').prop("disabled", true);
	      						$('#recording').prop("checked", false);
	      							$('#recordingChecker').attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded");
      							$('#elapsed_time').text("");
      							$('#running_time').val("");
	      						$('#running_time').css("color", "black");

	      						clearTable();
	      					}
	      					else if(state == "setup_ok"){
	      						$('#checkChip').prop("disabled", false);
	      						$('#setup').prop("disabled", false);
	      						$('#period').prop("disabled", false);
	      						$('#deadline').prop("disabled", false);
	      						$('#start').prop("disabled", false);
	      						$('#recording').prop("disabled", false);

	      						// Setting the checkboxes state
	      						var chipInfo = jsonData.chipInfo;
	      						setCheckBoxState(chipInfo);

	      						// Setting the setup data
	      						var freq = jsonData.freq;
	      						var freqs = freq.split(',');
	      						var period = jsonData.period;
	      						var deadline = jsonData.deadline;
	      						var channel = jsonData.channel;
	      						var channels = channel.split(',');
	      						var recordState = jsonData.recordState;

	      						$('#period').val(period);
	      						$('#period').css("color", "black");
	      						$('#deadline').val(deadline);
	      						$('#deadline').css("color", "black");
	      						$('#running_time').val("");
	      						$('#running_time').css("color", "black");

	      						for(var i=0; i<5; i++){
	      							$('#selectFreq' + (i+1)).prop("disabled", false);
	      							$('#selectFreq' + (i+1) + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded");
	      						}

	      						for(var i=0; i<freqs.length; i++){
	      							var freqValue = freqs[i].trim();
	      							var freqIndex = predefinedFreqs.indexOf(freqValue) + 1;

			          				$('#selectFreq' + freqIndex).prop("checked", true);
			          				$('#selectFreq' + freqIndex + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded is-checked");
			          			}

	      						for(var i=0; i<channels.length; i++){
	      							var channelIndex = parseInt(channels[i].trim());
	      							var checkId = "#selectChannel" + (channelIndex+1);
	      							var checkCheckerId = "#selectChannel" + (channelIndex+1) + "_checker";

	      							$(checkId).prop("checked", true);
	      							$(checkCheckerId).attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded is-checked");
	      						}

	      						// setting the record check box
	      						if(recordState == "record_on"){
	      							$('#recording').prop("checked", true);
	      							$('#recordingChecker').attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded is-checked");
	      						}
	      						else{
	      							$('#recording').prop("checked", false);
	      							$('#recordingChecker').attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded");
	      						}
	      					}
	      					else if(state == "running"){
	      						// This running is only once
								$('#checkChip').prop("disabled", false);
								$('#setup').prop("disabled", true);
								$('#period').prop("disabled", true);
								$('#deadline').prop("disabled", true);
								$('#recording').prop("disabled", false);
								$('#start').prop("disabled", false);
								$('#start').text("STOP");

								// Setting the checkboxes state
	      						var chipInfo = jsonData.chipInfo;
	      						setCheckBoxState(chipInfo);

	      						// Setting the setup data
	      						var freq = jsonData.freq;
	      						var freqs = freq.split(',');
	      						var period = jsonData.period;
	      						var deadline = jsonData.deadline;
	      						var channel = jsonData.channel;
	      						var channels = channel.split(',');
	      						var recordState = jsonData.recordState;
	      						var startTime = jsonData.startTime;
	      						var endTime = jsonData.endTime;

	      						$('#period').val(period);
	      						$('#deadline').val(deadline);
	      						$('#running_time').text(endTime);

	      						for(var i=0; i<freqs.length; i++){
	      							var freqValue = freqs[i].trim();
	      							var freqIndex = predefinedFreqs.indexOf(freqValue) + 1;
			          				$('#selectFreq' + freqIndex).prop("disabled", true);
			          				$('#selectFreq' + freqIndex).prop("checked", true);
			          				$('#selectFreq' + freqIndex + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded is-disabled is-checked");
			          			}

	      						for(var i=0; i<channels.length; i++){
	      							var channelIndex = parseInt(channels[i].trim());
	      							var checkId = "#selectChannel" + (channelIndex+1);
	      							$(checkId).prop("checked", true);
	      						}

	      						for(var i=0; i<8; i++){
			          				var selectId = "#selectChannel" + (i+1);
									var selectCheckerId = "#selectChannel" + (i+1) + "_checker";

									var checked = $(selectId).is(':checked');

									$(selectId).prop("disabled", true);
									if(checked){
										$(selectCheckerId).attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded is-checked");
									}
									else{
										$(selectCheckerId).attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded");
									}
								}

								// setting the record check box
	      						if(recordState == "record_on"){
	      							$('#recording').prop("checked", true);
	      							$('#recordingChecker').attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded is-checked");
	      						}
	      						else{
	      							$('#recording').prop("checked", false);
	      							$('#recordingChecker').attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded");
	      						}

	      						setElapsedTime(startTime);
	      					}
	      				}
	      				else{
	      					if(state == "running"){
			      				// This running is for elapsed time
			      				// Calculate elapsed time
			      				setElapsedTime(startTime);

			      				var endTime = jsonData.endTime;
			      				$('#running_time').text(endTime);

			      				stateChangeCheck = true;
			      			}
			      			else if(state == "ready"){
			      				// reset the variables
			      				if(stateChangeCheck){
			      					stateChangeCheck = false;
			      					initCheck = true;
			      					$('#start').prop("disabled", true);
									$('#start').text("START");
			      				}
			      			}
	      				}
	      			}
      			}
			},
			complete: function(){
			}
		});
	}

	function loadResult(index){
		console.log("index : " + index);
		// setting the current index
		$('#result_list_selected_index').val(index);

		var counter = $('#result_list_' + index + '_counter').val();
		var freqs = $('#result_list_' + index + '_freqs').val();
		var channels = $('#result_list_' + index + '_channels').val();

		freqs = freqs.substring(1, freqs.length-1);
		channels = channels.substring(1, channels.length-1);

		var freqsArray = freqs.split(",");
		var channelsArray = channels.split(",");

		var freqLen = freqsArray.length;
		var channelLen = channelsArray.length;

		// Clear previous channel, freq list
		// $('#table_channels').empty();
		// $('#table_frequencies').empty();
		// all disable and unchecked
		for(var i=1; i<=8; i++){
			$('#filterChannel' + i).prop("checked", false);
			$('#filterChannel' + i).prop("disabled", true);
			$('#filterChannel' + i + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded");
		}

		for(var i=1; i<=predefinedFreqs.length; i++){
			$('#filterFreq' + i).prop("checked", false);
			$('#filterFreq' + i).prop("value", 0);
			$('#filterFreq' + i).prop("disabled", true);
			$('#filterFreq' + i + "_checker").attr("class", "mdl-radio mdl-js-radio mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded");
		}

		console.log("channel len : " + channelLen);

		// make new channels, freqs list
		for(var i=0; i<channelLen; i++){
			var channel = parseInt(channelsArray[i]);
			$('#filterChannel' + channel).prop("disabled", false);

			if(i == 0){

				$('#filterChannel' + channel + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded is-checked");
				$('#filterChannel' + channel).prop("checked", true);
			}
			else{
				$('#filterChannel' + channel + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded");
			}
		}

		console.log("freq len : " + freqLen);

		for(var i=0; i<freqLen; i++){
			var freq = freqsArray[i].trim();
			var index = predefinedFreqs.indexOf(freq) + 1;

			console.log("freq index : " + index + ", " + freq);

			$('#filterFreq' + index).prop("disabled", false);
			if(i == 0){
				$('#filterFreq' + index + "_checker").attr("class", "mdl-radio mdl-js-radio mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded is-checked");
				$('#filterFreq' + index).prop("checked", true);
				$('#filterFreq' + index).prop("value", 1);
			}
			else{
				$('#filterFreq' + index + "_checker").attr("class", "mdl-radio mdl-js-radio mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded");
			}
		}

		// Select the Z value
		$('#filterZ').prop("checked", true);
		$('#filterZ').prop("value", 1);
		$('#filterZ_checker').attr("class", "mdl-radio mdl-js-radio mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded is-checked");

		// deselect the R value
		$('#filterR').prop("checked", false);
		$('#filterR').prop("value", 0);
		$('#filterR_checker').attr("class", "mdl-radio mdl-js-radio mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded");

		// deselect the C values
		$('#filterC').prop("checked", false);
		$('#filterC').prop("value", 0);
		$('#filterC_checker').attr("class", "mdl-radio mdl-js-radio mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded");

		loadGraph();
	}

	function loadGraph(){
		// getting the current select data
		var index = $('#result_list_selected_index').val();

		// getting all values
		var counter = $('#result_list_' + index + '_counter').val();
		var freqs = '';
		var channels = '';
		var dataSelection = '';

		for(var i=1; i<=8; ++i){
			var checked = $('#filterChannel' + i).is(':checked');
			if(checked){
				channels += (i-1) + ",";
			}
		}

		for(var i=1; i<=predefinedFreqs.length; ++i){
			var checked = $('#filterFreq' + i).is(':checked');
			if(checked){
				freqs += predefinedFreqs[i-1] + ",";
			}
		}

		// check Z, R, C selected
		if($('#filterZ').is(':checked')){
			dataSelection = "Z";
		}
		else if($('#filterR').is(':checked')){
			dataSelection = "R";
		}
		else if($('#filterC').is(':checked')){
			dataSelection = "C";
		}

		// remove last charater if the data is exist
		if(freqs !== ''){
			freqs = freqs.slice(0, -1);
		}

		if(channels !== ''){
			channels = channels.slice(0, -1);
		}

		$('#graph_view').attr("src", "graph/?dataCounter=" + counter + "&channels=" + channels + "&freqs=" + freqs + "&dataSelection=" + dataSelection);
	}

	function getResults(){
		var request = $.ajax({
			url: "/command/",
			type: "POST",
			data: "{\"command\":\"GetResultList\"}",
			dataType: "json",

			beforeSend: function(){

			},
			success: function(result){
				console.log(result);

				var dataLen = result.dataCounter.length;
				var state = result.state;


				for(var i=1; i<=4; i++){
					$('#result_list_' + (i+1) + '_radio').val("0");
					$('#result_list_' + (i+1) + '_radio_icon').attr("class", "demo-list-radio mdl-radio mdl-js-radio mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded");
					$('#result_list_' + i + '_icon').text("done");
					$('#result_list_' + i + '_icon').attr("class", "material-icons  mdl-list__item-icon redled");
				}

				if(state == 'running'){
					$('#result_list_1_icon').text('update');
					$('#result_list_1_icon').attr("class", "material-icons  mdl-list__item-icon blueled");
				}

				for(var i=0; i<4; ++i){
					if(i < dataLen){
						$('#result_list_' + (i+1)).attr("style", "visibility: ");
						$('#result_list_' + (i+1) + '_separator').attr("style", "visibility: ");
						$('#result_list_' + (i+1) + '_title').html(result.timeRange[i]);
						// $('#result_list_' + (i+1) + '_subtitle').html("period: " + result.period[i] + ", freqs: " + result.freqs[i] + "<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channels: " + result.channels[i]);
						$('#result_list_' + (i+1) + '_counter').val(result.dataCounter[i]);
						$('#result_list_' + (i+1) + '_freqs').val(result.freqs[i]);
						$('#result_list_' + (i+1) + '_channels').val(result.channels[i]);
					}
					else{
						$('#result_list_' + (i+1)).attr("style", "visibility: hidden;");
						$('#result_list_' + (i+1) + '_separator').attr("style", "visibility: hidden;");
						$('#result_list_' + (i+1) + '_counter').val("");
						$('#result_list_' + (i+1) + '_freqs').val("");
						$('#result_list_' + (i+1) + '_channels').val("");
					}
				}

				$('#result_list_1_radio').val("1");
				$('#result_list_1_radio_icon').attr("class", "demo-list-radio mdl-radio mdl-js-radio mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded is-checked");

				loadResult(1);
			},
			complete: function(){
      		}
		});
	}

	interval = setInterval(checkState, 1000);

	$(document).ready(function(){
		// checkChip button event
		$('#checkChip').click(function(){
			if(commandOperating){
				return;
			}

			commandOperating = true;

			var request = $.ajax({
          		url: "/command/",
          		type: "POST",
          		data: "{\"command\":\"CheckChip\"}",
          		dataType: "json",

          		beforeSend: function(){
          			$('#checkChip').text("Checking..");
          			$('#checkChip').prop("disabled", true);
          			$('#setup').prop("disabled", true);
          			$('#period').prop("disabled", true);
          			$('#deadline').prop("disabled", true);

					if ($('#state').text() != "running"){
	          			for(var i=1; i<=predefinedFreqs.length; i++){
	          				$('#selectFreq' + i).prop("disabled", true);
	          				$('#selectFreq' + i + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded");
	          			}
					}

          			for(var i=1; i<=8; i++){
        				var checkId = "#selectChannel" + (i);
        				$(checkId).prop('checked', true);
        			}
          		},
          		success: function(result){
          			console.log(result);
					// 180709 PSO - 'running' state에서 checkchip 할 수 있도록 if문 추가
          			if(result.result){
						if ($('#state').text() != "running"){
	          				var data = result.value;
	          				setCheckBoxState(data);

		          			$('#setup').prop("disabled", false);
		          			$('#period').prop("disabled", false);
		          			$('#deadline').prop("disabled", false);
		          			for(var i=1; i<=predefinedFreqs.length; i++){
		          				$('#selectFreq' + i).prop("disabled", false);
		          				$('#selectFreq' + i + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded");
		          			}
						}
          			}
          			else{
	          			alert("Check chip failed : " + result.error);
          			}
          		},
          		complete: function(){
          			commandOperating = false;
          			$('#checkChip').text("Check Chip");
          			$('#checkChip').prop("disabled", false);
          		}
        	});
        });

		$('#setup').click(function(){
			if(commandOperating){
				return;
			}
			console.log("setup : " + commandOperating);

			var frequencies = '';
			var period = $('#period').val();
			var deadline = $('#deadline').val();

			for(var i=1; i<=predefinedFreqs.length; ++i){
				var checked = $('#selectFreq' + i).is(':checked');
				if(checked){
					frequencies += predefinedFreqs[i-1] + ",";
				}
			}

			if(frequencies !== ''){
				frequencies = frequencies.slice(0, -1);
			}

			if(!validatePattern($('#period')) ||
			   !validatePattern($('#deadline')) ||
				frequencies == ''){
				showValidationErrorDialog();
				return;
			}

			if(!validateChannels()){
				showChannelErrorDialog();
				return;
			}

			commandOperating = true;

			var checkBoxes = "";

			for(var i=0; i<8; i++){
        		var checkId = "#selectChannel" + (i+1);

        		if($(checkId).is(':checked')){
        			checkBoxes += i + ",";
        		}
        	}

        	checkBoxes = checkBoxes.substring(0, checkBoxes.length-1);

			var request = $.ajax({
          		url: "/command/",
          		type: "POST",
          		data: "{\"command\":\"Setup\", \"freqs\":[ " +
          				frequencies +  " ], \"period\":\"" + period +
          				"\", \"deadline\":\"" + deadline + "\", \"channels\":[ " +
          				checkBoxes + " ] }",
          		dataType: "json",

          		beforeSend: function(){
          			$('#setup').prop("disabled", true);
          			$('#checkChip').prop("disabled", true);
          			$('#period').prop("disabled", true);
          			$('#deadline').prop("disabled", true);

          			for(var i=1; i<=predefinedFreqs.length; ++i){
						$('#selectFreq' + i).prop("disabled", true);

						var checked = $('#selectFreq' + i).is(':checked');
						if(checked){
	          				$('#selectFreq' + i + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded is-checked");
						}
						else{
							$('#selectFreq' + i + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded");
						}
					}

          			for(var i=0; i<8; i++){
          				var selectId = "#selectChannel" + (i+1);
						var selectCheckerId = "#selectChannel" + (i+1) + "_checker";

						var checked = $(selectId).is(':checked');

						$(selectId).prop("disabled", true);
						if(checked){
							$(selectCheckerId).attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded is-checked");
						}
						else{
							$(selectCheckerId).attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded");
						}
					}
          		},
          		success: function(result){
          			if(result.result){
          				$('#setup').prop("disabled", false);
	          			$('#checkChip').prop("disabled", false);
	          			$('#period').prop("disabled", false);
	          			$('#deadline').prop("disabled", false);
	          			$('#start').prop("disabled", false);
	          			$('#recording').prop("disabled", false);
	          			$('#recording').prop("checked", false);
		      			$('#recordingChecker').attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded");
          			}
          			else{
          				$('#setup').prop("disabled", false);
	          			$('#checkChip').prop("disabled", false);
	          			$('#period').prop("disabled", false);
	          			$('#deadline').prop("disabled", false);
	          			alert("Setup failed : " + result.error);
          			}
          		},
          		complete: function(){
          			commandOperating = false;

          			for(var i=1; i<=predefinedFreqs.length; ++i){
						$('#selectFreq' + i).prop("disabled", false);

						var checked = $('#selectFreq' + i).is(':checked');
						if(checked){
	          				$('#selectFreq' + i + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded is-checked");
						}
						else{
							$('#selectFreq' + i + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded");
						}
					}

          			for(var i=0; i<8; i++){
          				var selectId = "#selectChannel" + (i+1);
						var selectCheckerId = "#selectChannel" + (i+1) + "_checker";

						var checked = $(selectId).is(':checked');

						$(selectId).prop("disabled", false);
						if(checked){
							$(selectCheckerId).attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded is-checked");
						}
						else{
							$(selectCheckerId).attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-upgraded");
						}
					}
          		}
			});
		});

		$('#start').click(function(){
			if(commandOperating){
				console.log("test");
				return;
			}

			console.log("start : " + commandOperating);
			commandOperating = true;

			// checking current button state
			var buttonText = $('#start').text();

			if(buttonText == "START"){
				var request = $.ajax({
	          		url: "/command/",
	          		type: "POST",
	          		data: "{\"command\":\"start\"}",
	          		dataType: "json",

	          		beforeSend: function(){
	          			$('#checkChip').prop("disabled", true);
						$('#setup').prop("disabled", true);
						$('#frequencies').prop("disabled", true);
						$('#period').prop("disabled", true);
						$('#deadline').prop("disabled", true);
						$('#start').prop("disabled", true);

						for(var i=1; i<=predefinedFreqs.length; i++){
	          				$('#selectFreq' + i).prop("disabled", true);
	          				var checked = $('#selectFreq' + i).is(':checked');

	          				if(checked){
	          					$('#selectFreq' + i + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded is-checked");
	          				}
	          				else{
	          					$('#selectFreq' + i + "_checker").attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded");
	          				}
	          			}

						for(var i=0; i<8; i++){
	          				var selectId = "#selectChannel" + (i+1);
							var selectCheckerId = "#selectChannel" + (i+1) + "_checker";

							var checked = $(selectId).is(':checked');

							$(selectId).prop("disabled", true);
							if(checked){
								$(selectCheckerId).attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded is-checked");
							}
							else{
								$(selectCheckerId).attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded");
							}
						}
	          		},
	          		success: function(result){
	          			if(result.result){
	          				$('#start').prop("disabled", false);
							$('#start').text("STOP");
	          			}
	          			else{
	          				$('#start').prop("disabled", false);
	          				alert("Start failed : " + result.error);
	          			}
						$('#checkChip').prop("disabled", false);
	          		},
	          		complete: function(){
	          			commandOperating = false;
	          		}
	        	});
			}
			else{
				var request = $.ajax({
	          		url: "/command/",
	          		type: "POST",
	          		data: "{\"command\":\"stop\"}",
	          		dataType: "json",

	          		beforeSend: function(){
						$('#start').prop("disabled", true);
						$('#checkChip').prop("disabled", true);
						$('#recording').prop("disabled", true);
  						$('#recording').prop("checked", false);
						$('#recordingChecker').attr("class", "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events is-disabled is-upgraded");
						$('#running_time').val("");
  						$('#running_time').css("color", "black");
						clearInterval(interval);
	          		},
	          		success: function(result){

	          			if(result.result){
							// Clear the values
							initCheck = true;
							interval = setInterval(checkState, 1000);
						}
						else{
							$('#start').prop("disabled", false);
							alert("Stop failed : " + result.error);
						}
	          		},
	          		complete: function(){
	          			commandOperating = false;
						$('#checkChip').prop("disabled", false);
	          		}
	        	});
			}
        });

		$('#recording').click(function(){
			var checked = $('#recording').is(':checked');
			var value = "";
			if(checked){
				value = "record_on";
			}
			else{
				value = "record_off";
			}

			var request = $.ajax({
          		url: "/state/",
          		type: "POST",
          		data: "{\"menu\":0, \"key\":\"RECORD_STATE\",\"value\":\"" + value + "\"}",
          		dataType: "json",

          		beforeSend: function(){
          		},
          		success: function(result){
          		},
          		complete: function(){
          		}
        	});
        });

        $('#tab_2').click(function(){
        	getResults();
        });

        // filter selection events
        for(let i=1; i<=6; i++){
        	$('#result_list_' + i + '_radio').click(function(){
				loadResult(i);
			});
        }

        for(let i=1; i<=8; i++){
        	$('#filterChannel' + i).click(function(){
        		loadGraph();
			});

			if(i <= predefinedFreqs.length){
				$('#filterFreq' + i).click(function(){
					loadGraph();
				});
			}
        }

        $('#filterZ').click(function(){
        	loadGraph();
        });

        $('#filterR').click(function(){
        	loadGraph();
        });

        $('#filterC').click(function(){
        	loadGraph();
        });

        $('#saveExcel').click(function() {			// # update
        	// getting the current select data
			var index = $('#result_list_selected_index').val();

			// getting dataCounter
			var counter = $('#result_list_' + index + '_counter').val();

        	window.location.replace("/exportData/excel/?dataCounter=" + counter);
        });

		$('#saveText').click(function() {
        	// getting the current select data
			var index = $('#result_list_selected_index').val();

			// getting dataCounter
			var counter = $('#result_list_' + index + '_counter').val();

        	window.location.replace("/exportData/text/?dataCounter=" + counter);
        });
 	});
</script>
</head>

<dialog id="dialog_validation_error" class="mdl-dialog">
  <h3 class="mdl-dialog__title">Validation error!</h3>
  <div class="mdl-dialog__content">
    <p>
      Please check frequencies, period, deadline !
    </p>
  </div>
  <div class="mdl-dialog__actions">
    <button type="button" class="mdl-button">Ok</button>
  </div>
</dialog>

<dialog id="dialog_channel_error" class="mdl-dialog">
  <h3 class="mdl-dialog__title">Validation error!</h3>
  <div class="mdl-dialog__content">
    <p>
      Please select the channel at least 1.
    </p>
  </div>
  <div class="mdl-dialog__actions">
    <button type="button" class="mdl-button">Ok</button>
  </div>
</dialog>

<style>
	.h5_style {
		font-family: "Roboto","Helvetica","Arial",sans-serif;
    	margin: 24px 0 16px;
    	font-weight: 500;
    	font-size: 14px;
	}

	.h5_style_no_margin {
		font-family: "Roboto","Helvetica","Arial",sans-serif;
    	margin: 24px 0 16px;
    	font-weight: 500;
    	font-size: 14px;
		-webkit-margin-after: 0.2em;
	}

	.mdl-list__item2 {
		font-size:12px;
		min-height:10px;
		height:20px;
	}

	.list_item_no_padding {
	  	padding-top: 5.5px;
	  	padding-bottom: 5.5px;
	  	min-height: 32px;
	}

	.list_item_no_padding2 {
	  	padding-top: 0px;
	  	padding-bottom: 2px;
	  	min-height: 16px;
	}
</style>

<!-- Simple header with scrollable tabs. -->
<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
  <header class="mdl-layout__header">
    <div class="mdl-layout__header-row">
      <span class="mdl-layout-title">IMPEDANCE ANALYSIS</span>
    </div>
    <div class="mdl-layout__tab-bar mdl-js-ripple-effect">
      <a href="#scroll-tab-1" class="mdl-layout__tab is-active" id="tab_1">Setup/Control View</a>
      <a href="#scroll-tab-2" class="mdl-layout__tab" id="tab_2">Report View</a>
    </div>
  </header>
  <main class="mdl-layout__content">
    <section class="mdl-layout__tab-panel is-active" id="scroll-tab-1">

      <div style="float: left; margin: 10px; margin-left:20px; border:2px solid #ebebeb; height:550px"></div>

      <div class="page-content" style="float: left; margin: 0px 5px 5px 10px;">
      	<h5 class="h5_style">&nbsp;&nbsp;CHIP SETUP</h5>
      	<table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
		  <thead>
		    <tr>
		      <th class="mdl-data-table__cell--non-numeric" width="35px" style="padding-left: 24px;">ch</th>
		      <th width="70px">R</th>
		      <th width="70px">C</th>
		    </tr>
		  </thead>
		  <tbody>
		    <tr>
		      <td class="mdl-data-table__cell--non-numeric">1</td>
		      <td class="list_item_no_padding" id="R1"></td>
		      <td class="list_item_no_padding" id="C1"></td>
		    </tr>
		    <tr>
		      <td class="mdl-data-table__cell--non-numeric">2</td>
		      <td class="list_item_no_padding" id="R2"></td>
		      <td class="list_item_no_padding" id="C2"></td>
		    </tr>
		    <tr>
		      <td class="mdl-data-table__cell--non-numeric">3</td>
		      <td class="list_item_no_padding" id="R3"></td>
		      <td class="list_item_no_padding" id="C3"></td>
		    </tr>
		    <tr>
		      <td class="mdl-data-table__cell--non-numeric">4</td>
		      <td class="list_item_no_padding" id="R4"></td>
		      <td class="list_item_no_padding" id="C4"></td>
		    </tr>
		    <tr>
		      <td class="mdl-data-table__cell--non-numeric">5</td>
		      <td class="list_item_no_padding" id="R5"></td>
		      <td class="list_item_no_padding" id="C5"></td>
		    </tr>
		    <tr>
		      <td class="mdl-data-table__cell--non-numeric">6</td>
		      <td class="list_item_no_padding" id="R6"></td>
		      <td class="list_item_no_padding" id="C6"></td>
		    </tr>
		    <tr>
		      <td class="mdl-data-table__cell--non-numeric">7</td>
		      <td class="list_item_no_padding" id="R7"></td>
		      <td class="list_item_no_padding" id="C7"></td>
		    </tr>
		    <tr>
		      <td class="mdl-data-table__cell--non-numeric">8</td>
		      <td class="list_item_no_padding" id="R8"></td>
		      <td class="list_item_no_padding" id="C8"></td>
		    </tr>
		  </tbody>
		</table>

		<button id="checkChip" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" style="margin: 30px 20px 0px 40px" disabled>
		  Check chip
		</button>
      </div>

      <div style="float: left; margin: 10px; margin-left:20px; border:2px solid #ebebeb; height:550px"></div>

	  <style>
	    .list-control-style {
	    width: 170px;
	  }

	  .list-radio-style {
	    display: inline;
	  }

	  .material-icons.redled { color: #FF0000; }
 	  .material-icons.blueled { color: #0000FF; }
	  </style>

      <div class="page-content" style="float: left; margin: 0px 5px 5px 10px;">
			<h5 class="h5_style" style="margin-left: 5px;">PARAMETER SETUP</h5>
			<ul class="list-control-style mdl-list">
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">
			      <i id="valid1_icon" class="material-icons  mdl-list__item-icon">remove</i>
			      ch 1
			    </span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="selectChannel1" id="selectChannel1_checker">
			        <input type="checkbox" id="selectChannel1" class="mdl-checkbox__input" disabled />
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">
			      <i id="valid2_icon" class="material-icons  mdl-list__item-icon">remove</i>
			      ch 2
			    </span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="selectChannel2" id="selectChannel2_checker">
			        <input type="checkbox" id="selectChannel2" class="mdl-checkbox__input" disabled />
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">
			      <i id="valid3_icon" class="material-icons  mdl-list__item-icon">remove</i>
			      ch 3
			    </span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="selectChannel3" id="selectChannel3_checker">
			        <input type="checkbox" id="selectChannel3" class="mdl-checkbox__input" disabled />
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">
			      <i id="valid4_icon" class="material-icons  mdl-list__item-icon">remove</i>
			      ch 4
			    </span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="selectChannel4" id="selectChannel4_checker">
			        <input type="checkbox" id="selectChannel4" class="mdl-checkbox__input" disabled />
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">
			      <i id="valid5_icon" class="material-icons  mdl-list__item-icon">remove</i>
			      ch 5
			    </span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="selectChannel5" id="selectChannel5_checker">
			        <input type="checkbox" id="selectChannel5" class="mdl-checkbox__input" disabled />
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">
			      <i id="valid6_icon" class="material-icons  mdl-list__item-icon">remove</i>
			      ch 6
			    </span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="selectChannel6" id="selectChannel6_checker">
			        <input type="checkbox" id="selectChannel6" class="mdl-checkbox__input" disabled />
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">
			      <i id="valid7_icon" class="material-icons  mdl-list__item-icon">remove</i>
			      ch 7
			    </span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="selectChannel7" id="selectChannel7_checker">
			        <input type="checkbox" id="selectChannel7" class="mdl-checkbox__input" disabled />
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">
			      <i id="valid8_icon" class="material-icons  mdl-list__item-icon">remove</i>
			      ch 8
			    </span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="selectChannel8" id="selectChannel8_checker">
			        <input type="checkbox" id="selectChannel8" class="mdl-checkbox__input" disabled />
			      </label>
			    </span>
			  </li>
			</ul>

	  </div>

	  <div class="page-content" style="float: left;">
	  	<h5>&nbsp;&nbsp;&nbsp;</h5>
		<!-- CONTROL VIEW의 주파수 체크박스 -->
	  	<ul class="list-control-style mdl-list">
			  <li class="mdl-list__item">
			    <span class="mdl-list__item-primary-content">
			      freqs
			    </span>
			    <span class="mdl-list__item-secondary-action" style="margin-left: 20px;">
				  <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="selectFreq1" id="selectFreq1_checker">
			        <input type="checkbox" id="selectFreq1" class="mdl-checkbox__input" disabled/>
			        	&nbsp;4000
			      </label>
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="selectFreq2" id="selectFreq2_checker">
			        <input type="checkbox" id="selectFreq2" class="mdl-checkbox__input" disabled/>
			        	&nbsp;8000
			      </label>
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="selectFreq3" id="selectFreq3_checker">
			        <input type="checkbox" id="selectFreq3" class="mdl-checkbox__input" disabled/>
			        	&nbsp;16000
			      </label>
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="selectFreq4" id="selectFreq4_checker">
			        <input type="checkbox" id="selectFreq4" class="mdl-checkbox__input" disabled/>
			        	&nbsp;32000
			      </label>
				  <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="selectFreq5" id="selectFreq5_checker">
			        <input type="checkbox" id="selectFreq5" class="mdl-checkbox__input" disabled/>
			        	&nbsp;64000
			      </label>
				  <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="selectFreq6" id="selectFreq6_checker">
			        <input type="checkbox" id="selectFreq6" class="mdl-checkbox__input" disabled/>
			        	&nbsp;128000
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item">
			    <span class="mdl-list__item-primary-content"  style="line-height : 1.2;">
			      &nbsp;&nbsp;period (minutes)
			    </span>
			    <span class="mdl-list__item-secondary-action">
			      <div class="mdl-textfield mdl-js-textfield" style="margin-left: 30px;">
				    <input class="mdl-textfield__input" type="text" required="required" pattern="-?[0-9]*(\.[0-9]+)?" id="period" style="border-bottom: 2px solid rgba(0,0,0,.48); padding-left: 16px;" disabled >
				    <span class="mdl-textfield__error">Input is not a number!</span>
				  </div>
			    </span>
			  </li>
			  <li class="mdl-list__item">
			    <span class="mdl-list__item-primary-content" style="line-height : 1.2;">
			      deadline  &nbsp;(days)
			    </span>
			    <span class="mdl-list__item-secondary-action">
			      <div class="mdl-textfield mdl-js-textfield" style="margin-left: 30px;">
				    <input class="mdl-textfield__input" type="text" required="required" pattern="-?[0-9]*(\.[0-9]+)?" id="deadline" style="border-bottom: 2px solid rgba(0,0,0,.48); padding-left: 20px;" disabled >
				    <span class="mdl-textfield__error">Input is a days!</span>
				  </div>
			    </span>
			  </li>
			  <li class="mdl-list__item">
			    <span class="mdl-list__item-primary-content">
			    	<button id="setup" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" style="margin-left: 40px;" disabled>
					  &nbsp;&nbsp;Setup&nbsp;&nbsp;
					</button>
			    </span>
			  </li>
			</ul>
	  </div>

	  <div style="float: left; margin: 10px; margin-left:20px; border:2px solid #ebebeb; height:550px"></div>

	  <div class="page-content" style="float: left; margin: 0px 5px 5px 10px;">
	  	<h5 class="h5_style" style="margin-left: 5px;">DEVICE CONTROL</h5>
	  	<ul class="list-control-style mdl-list" style="width: 260px;">
			  <li class="mdl-list__item">
			    <span class="mdl-list__item-primary-content">
			      State :
			    </span>
			    <span class="mdl-list__item-secondary-action">
			      <i id="state" style="font-size:14px;"></i>
		    	</span>
			  </li>
			  <li class="mdl-list__item">
			    <span class="mdl-list__item-primary-content">
			      End Date :
			    </span>
			    <span class="mdl-list__item-secondary-action">
			      <i id="running_time" style="font-size:12px;"></i>

			    </span>
			  </li>
			  <li class="mdl-list__item">
			    <span class="mdl-list__item-primary-content">
			      Elapsed Time :
			    </span>
			    <span class="mdl-list__item-secondary-action">
			      <i id="elapsed_time" style="font-size:14px;"></i>

			    </span>
			  </li>
			  <li class="mdl-list__item">
			  	<label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="recording" style="margin-left: 20px;" id="recordingChecker">
			  		<input type="checkbox" id="recording" class="mdl-checkbox__input" disabled>
			  		<span class="mdl-checkbox__label">Record</span>
		  		</label>
			    <span class="mdl-list__item-primary-content">
			    	<button id="start" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" style="margin-right: 20px;" disabled>START</button>
			    </span>
			  </li>
			</ul>
	  </div>

	  <div style="float: left; margin: 10px; margin-left:20px; border:2px solid #ebebeb; height:550px"></div>
    </section>
    <section class="mdl-layout__tab-panel" id="scroll-tab-2">
      <div class="page-content" style="float: left; margin: 0px 5px 5px 10px;">
      	<h5 class="h5_style_no_margin">&nbsp;&nbsp;HISTORY</h5>

		<style>
		.demo-list-control {
		  width: 260px;
		}

		.demo-list-radio {
		  display: inline;
		}

		.hr_no_padding {
			-webkit-margin-before: 0.5em;
			-webkit-margin-after: 0.5em;
		}

		.ul_no_padding {
			-webkit-padding-start: 0px;
			-webkit-margin-before: 0em;
			-webkit-margin-after: 0em;
		}

		</style>

		<ul class="demo-list-control mdl-list">
			<!-- 170220 YJ(mauver) remove change the one colume (mdl-list__item mdl-list__item"-"-two-line) -->
		  <li class="mdl-list__item mdl-list__item2" id="result_list_1" style="visibility: hidden;">
		    <span class="mdl-list__item-primary-content">
		      <i class="material-icons  mdl-list__item-avatar" id="result_list_1_icon">done</i>
		      <span id="result_list_1_title"></span>
		    </span>
		    <span class="mdl-list__item-secondary-action">
		      <label class="demo-list-radio mdl-radio mdl-js-radio mdl-js-ripple-effect" for="result_list_1_radio" id="result_list_1_radio_icon">
		        <input type="radio" id="result_list_1_radio" class="mdl-radio__button" name="options" value="0" />
		      </label>
		    </span>
		    <input id="result_list_1_counter" type="hidden" />
		    <input id="result_list_1_freqs" type="hidden" />
		    <input id="result_list_1_channels" type="hidden" />
		  </li>
		  <hr class="hr_no_padding" id="result_list_1_separator" style="visibility: hidden;">
		  <li class="mdl-list__item mdl-list__item2" id="result_list_2" style="visibility: hidden;">
		    <span class="mdl-list__item-primary-content">
		      <i class="material-icons  mdl-list__item-avatar" id="result_list_2_icon">done</i>
		      <span id="result_list_2_title"></span>
		    </span>
		    <span class="mdl-list__item-secondary-action">
		      <label class="demo-list-radio mdl-radio mdl-js-radio mdl-js-ripple-effect" for="result_list_2_radio" id="result_list_2_radio_icon">
		        <input type="radio" id="result_list_2_radio" class="mdl-radio__button" name="options" value="0" />
		      </label>
		    </span>
		    <input id="result_list_2_counter" type="hidden" />
		    <input id="result_list_2_freqs" type="hidden" />
		    <input id="result_list_2_channels" type="hidden" />
		  </li>
		  <hr class="hr_no_padding" id="result_list_2_separator" style="visibility: hidden;">
		  <li class="mdl-list__item mdl-list__item2" id="result_list_3" style="visibility: hidden;">
		    <span class="mdl-list__item-primary-content">
		      <i class="material-icons  mdl-list__item-avatar" id="result_list_3_icon">done</i>
		      <span id="result_list_3_title"></span>
		    </span>
		    <span class="mdl-list__item-secondary-action">
		      <label class="demo-list-radio mdl-radio mdl-js-radio mdl-js-ripple-effect" for="result_list_3_radio" id="result_list_3_radio_icon">
		        <input type="radio" id="result_list_3_radio" class="mdl-radio__button" name="options" value="0" />
		      </label>
		    </span>
		    <input id="result_list_3_counter" type="hidden" />
		    <input id="result_list_3_freqs" type="hidden" />
		    <input id="result_list_3_channels" type="hidden" />
		  </li>
		  <hr class="hr_no_padding" id="result_list_3_separator" style="visibility: hidden;">
		  <li class="mdl-list__item mdl-list__item2" id="result_list_4" style="visibility: hidden;">
		    <span class="mdl-list__item-primary-content">
		      <i class="material-icons  mdl-list__item-avatar" id="result_list_4_icon">done</i>
		      <span id="result_list_4_title"></span>
		    </span>
		    <span class="mdl-list__item-secondary-action">
		      <label class="demo-list-radio mdl-radio mdl-js-radio mdl-js-ripple-effect" for="result_list_4_radio" id="result_list_4_radio_icon">
		        <input type="radio" id="result_list_4_radio" class="mdl-radio__button" name="options" value="0" />
		      </label>
		    </span>
		    <input id="result_list_4_counter" type="hidden" />
		    <input id="result_list_4_freqs" type="hidden" />
		    <input id="result_list_4_channels" type="hidden" />
		  </li>
		  <hr class="hr_no_padding" id="result_list_4_separator" style="visibility: hidden;">
		  <!--
		  <li class="mdl-list__item mdl-list__item2" id="result_list_5" style="visibility: hidden;">
		    <span class="mdl-list__item-primary-content">
		      <i class="material-icons  mdl-list__item-avatar" id="result_list_5_icon">done</i>
		      <span id="result_list_5_title"></span>
		    </span>
		    <span class="mdl-list__item-secondary-action">
		      <label class="demo-list-radio mdl-radio mdl-js-radio mdl-js-ripple-effect" for="result_list_5_radio" id="result_list_5_radio_icon">
		        <input type="radio" id="result_list_5_radio" class="mdl-radio__button" name="options" value="0" />
		      </label>
		    </span>
		    <input id="result_list_5_counter" type="hidden" />
		    <input id="result_list_5_freqs" type="hidden" />
		    <input id="result_list_5_channels" type="hidden" />
		  </li>
		  <hr class="hr_no_padding" id="result_list_5_separator" style="visibility: hidden;">
		  <li class="mdl-list__item mdl-list__item2" id="result_list_6" style="visibility: hidden;">
		    <span class="mdl-list__item-primary-content">
		      <i class="material-icons  mdl-list__item-avatar" id="result_list_6_icon">done</i>
		      <span id="result_list_6_title"></span>
		    </span>
		    <span class="mdl-list__item-secondary-action">
		      <label class="demo-list-radio mdl-radio mdl-js-radio mdl-js-ripple-effect" for="result_list_6_radio" id="result_list_6_radio_icon">
		        <input type="radio" id="result_list_6_radio" class="mdl-radio__button" name="options" value="0" />
		      </label>
		    </span>
		    <input id="result_list_6_counter" type="hidden" />
		    <input id="result_list_6_freqs" type="hidden" />
		    <input id="result_list_6_channels" type="hidden" />
		  </li>
		  <hr class="hr_no_padding" id="result_list_6_separator" style="visibility: hidden;">
		  -->
		  <input id="result_list_selected_index" type="hidden" />
		</ul>
      </div>

      <div style="float: left; margin: 10px; margin-left:20px; border:2px solid #ebebeb; height:250px"></div>

      <style>
		    .filter-list-control-style {
		    width: 120px;
		  }

		  .filter-list-control-style2 {
		    width: 90px;
		  }

		  .material-icons.redled { color: #FF0000; }
	 	  .material-icons.blueled { color: #0000FF; }

	 	  .list_item_no_padding {
	 	  	padding-top: 5.5px;
	 	  	padding-bottom: 5.5px;
	 	  	min-height: 32px;
	 	  }
	  </style>

      <div class="page-content" style="float: left; margin: 0px 5px 5px 10px;">
      		<h5 class="h5_style_no_margin" style="margin-left: 10px;">CHANNEL FILTER</h5>
			<ul class="filter-list-control-style mdl-list ul_no_padding" style="float: left; margin: 0px 5px 5px 10px;">
			  <li class="mdl-list__item list_item_no_padding2">
			    <span class="mdl-list__item-primary-content">ch 1</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="filterChannel1" id="filterChannel1_checker">
			        <input type="checkbox" id="filterChannel1" class="mdl-checkbox__input" />
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding2">
			    <span class="mdl-list__item-primary-content">ch 2</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="filterChannel2" id="filterChannel2_checker">
			        <input type="checkbox" id="filterChannel2" class="mdl-checkbox__input" />
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding2">
			    <span class="mdl-list__item-primary-content">ch 3</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="filterChannel3" id="filterChannel3_checker">
			        <input type="checkbox" id="filterChannel3" class="mdl-checkbox__input" />
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding2">
			    <span class="mdl-list__item-primary-content">ch 4</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="filterChannel4" id="filterChannel4_checker">
			        <input type="checkbox" id="filterChannel4" class="mdl-checkbox__input" />
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding2">
			    <span class="mdl-list__item-primary-content">ch 5</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="filterChannel5" id="filterChannel5_checker">
			        <input type="checkbox" id="filterChannel5" class="mdl-checkbox__input" />
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding2">
			    <span class="mdl-list__item-primary-content">ch 6</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="filterChannel6" id="filterChannel6_checker">
			        <input type="checkbox" id="filterChannel6" class="mdl-checkbox__input" />
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding2">
			    <span class="mdl-list__item-primary-content">ch 7</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="filterChannel7" id="filterChannel7_checker">
			        <input type="checkbox" id="filterChannel7" class="mdl-checkbox__input" />
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding2">
			    <span class="mdl-list__item-primary-content">ch 8</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="filterChannel8" id="filterChannel8_checker">
			        <input type="checkbox" id="filterChannel8" class="mdl-checkbox__input" />
			      </label>
			    </span>
			  </li>
			</ul>
      </div>
	  <!-- REPORT VIEW의 주파수 라디오 버튼 -->
      <div class="page-content" style="float: left; margin: 0px 5px 5px 10px;">
      		<h5 class="h5_style_no_margin" style="margin-left: 10px;">FREQ FILTER</h5>
      		<ul class="filter-list-control-style mdl-list ul_no_padding" style="float: left; margin: 0px 5px 5px 10px;">
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">4000</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="filterFreq1" id="filterFreq1_checker">
			        <input type="radio" id="filterFreq1" class="mdl-radio__button" name="filterFreqOptions"/>
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">8000</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="filterFreq2" id="filterFreq2_checker">
			        <input type="radio" id="filterFreq2" class="mdl-radio__button" name="filterFreqOptions"/>
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">16000</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="filterFreq3" id="filterFreq3_checker">
			        <input type="radio" id="filterFreq3" class="mdl-radio__button" name="filterFreqOptions"/>
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">32000</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="filterFreq4" id="filterFreq4_checker">
			        <input type="radio" id="filterFreq4" class="mdl-radio__button" name="filterFreqOptions"/>
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">64000</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="filterFreq5" id="filterFreq5_checker">
			        <input type="radio" id="filterFreq5" class="mdl-radio__button" name="filterFreqOptions"/>
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">128000</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="filterFreq6" id="filterFreq6_checker">
			        <input type="radio" id="filterFreq6" class="mdl-radio__button" name="filterFreqOptions"/>
			      </label>
			    </span>
			  </li>
			  <!--
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">20000</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="filterFreq5" id="filterFreq5_checker">
			        <input type="radio" id="filterFreq5" class="mdl-radio__button" name="filterFreqOptions"/>
			      </label>
			    </span>
			  </li>
			  -->
			</ul>
      </div>
      <div class="page-content" style="float: left; margin: 0px 5px 5px 10px;">
      		<h5 class="h5_style_no_margin" style="margin-left: 10px;">DATA SELECTION</h5>
      		<ul class="filter-list-control-style2 mdl-list ul_no_padding" style="float: left; margin: 0px 5px 5px 10px;">
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">Z</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="filterZ" id="filterZ_checker">
			        <input type="radio" id="filterZ" class="mdl-radio__button" name="filterDataOptions" checked/>
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">R</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="filterR" id="filterR_checker">
			        <input type="radio" id="filterR" class="mdl-radio__button" name="filterDataOptions"/>
			      </label>
			    </span>
			  </li>
			  <li class="mdl-list__item list_item_no_padding">
			    <span class="mdl-list__item-primary-content">C</span>
			    <span class="mdl-list__item-secondary-action">
			      <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="filterC" id="filterC_checker">
			        <input type="radio" id="filterC" class="mdl-radio__button" name="filterDataOptions"/>
			      </label>
			    </span>
			  </li>
			</ul>
      </div>
	  <div style="float: left; margin: 10px; margin-left:20px; border:2px solid #ebebeb; height:250px"></div>
      <div class="page-content" style="float: left; margin: 0px 5px 5px 10px;">
      		<h5 class="h5_style_no_margin" style="margin-left: 10px;">EXPORT DATA</h5>
      		<button id="saveExcel" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" style="margin: 30px 20px 0px 40px">
      			SAVE AS EXCEL
			</button>
			<br>
			<button id="saveText" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" style="margin: 30px 20px 0px 40px">
      			SAVE AS TEXT
			</button>
      </div>
      <div class="page-content" style="float: bottom;">
      		<iframe id="graph_view" width="100%" height="550px" src=""></iframe>
      </div>
    </section>
  </main>
</div>
</body>
</html>
